<html>
<style>
    body
    {
        background-color: #F5F5F5
    }
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<title>Can't Get Ogre You</title>

<!-- Interaction prompts -->
<div id = "interact" style = "font-family: 'Press Start 2P', cursive;font-size: 15; position: absolute; top:20; bottom:0; margin: auto"></div>

<!-- Shrek in conversation-->
<div><img id="shrekconv" src = "https://www.kindpng.com/picc/m/594-5947878_shrek-sexy-sexyshrek-cute-anime-swamp-cute-pictures.png" width = "300" height = "550" style = "position: absolute; left: 75%; top:0; bottom:0; margin: auto;display: none"></div>
    
<!-- Angry shrek in conversation-->
<div><img id = "angryshrek" src = "https://pngarchive.com/public/uploads/preview/angry-shrek-png-11635354925bdii9mdo4d.png" width = "300" height = "550" style = "position: absolute; left: 75%; top:0; bottom:0; margin: auto;display: none"></div>

<!-- Student in conversation -->
<div><img id = "student" src = "https://static.wikia.nocookie.net/all-worlds-alliance/images/4/44/Sakuta_Render.png/revision/latest?cb=20190412021804" width = "300" height = "550" style = "position: absolute; left: 75%; top:0; bottom:0; margin: auto;display: none"></div>

<!-- knuckles in conversation -->
<div><img id = "knucklesconv" src = "https://i.kym-cdn.com/photos/images/facebook/001/337/786/426.png"  width = "300" height = "550" style = "position: absolute; left: 75%; top:0; bottom:0; margin: auto;display: none"></div>
    
<!-- old man in conversation -->
<div><img id = "oldconv" src = "https://c.tenor.com/7PZ8ErRLw68AAAAC/sailormoon-grandpa.gif" width = "300" height = "550" style = "position: absolute; left: 75%; top:0; bottom:0; margin: auto;display: none"></div>
    
<script>
    //end image
    //https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/169599ba-5b73-4163-864d-02a990a1fb18/dc86kgk-71e53b76-ad69-4590-b737-6a45d0db95cd.png/v1/fill/w_1280,h_1699,q_80,strp/school_girl_shrek_by_ilovearses_dc86kgk-fullview.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTY5OSIsInBhdGgiOiJcL2ZcLzE2OTU5OWJhLTViNzMtNDE2My04NjRkLTAyYTk5MGExZmIxOFwvZGM4Nmtnay03MWU1M2I3Ni1hZDY5LTQ1OTAtYjczNy02YTQ1ZDBkYjk1Y2QucG5nIiwid2lkdGgiOiI8PTEyODAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.InNK1X4NHmEhXRpm4G2tCFp7_Dz9IxXuI10R8e6eulU
    
    //start screen
    var startscreen = document.createElement('canvas')
    startscreen.width = 1000
    startscreen.height = 600
    var clickcount = 0
    startscreen.style = "position: absolute; top:0; right:0; left:0; bottom:0; margin: auto;background-image: url('https://preview.redd.it/0ewm50gi9ji71.jpg?auto=webp&s=39e7e498790bda7a16a5f91ab1b78ad2f1847500');background-size: 100% 100%"
    var cstart = startscreen.getContext('2d')
    var startbtn = document.createElement("button")
    startbtn.style = "width: 150;height: 70;font-size: 30; position: absolute; top: 53%; left: 47%"
    startbtn.innerHTML = "Start"
    
    //voice
    var speech = new SpeechSynthesisUtterance()
    speech.pitch = 1.2
    speech.rate = 1
    speech.lang = "ja-JA"
    
    //room identification
    var room = 0
    
    //instructions
    var interact = document.getElementById("interact")
    
    //rooms and contexts
    var room1 = document.createElement("canvas")
    var context1 = room1.getContext('2d')
    var room2 = document.createElement("canvas")
    var context2 = room2.getContext('2d')
    var room3 = document.createElement("canvas")
    var context3 = room3.getContext('2d')
    
    //player variables
    var player = new Image();
    player.src = "http://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/a0ffa2c1d551dfc.png"
    var px = 0
    var py = 0
    var pd = 80
    var ps = 10
    
    //player direction
    var right = 0;
    
    //shrek
    var shrek = new Image();
    shrek.src = "https://www.pngkey.com/png/full/877-8779892_is-shrek-school-girl-derp-face-pixelart.png"
    var shrekconv = document.getElementById("shrekconv")
    var angryshrek = document.getElementById("angryshrek")
    
    //shrek true form
    var trueshrek = new Image();
    trueshrek.src = "https://static.wikia.nocookie.net/supermarioglitchy4/images/0/0c/Old_man_Hobo.png/revision/latest?cb=20201231181005"
    var oldconv = document.getElementById("oldconv")
    
    //knuckles
    var knuckles = new Image();
    knuckles.src = "https://i.pinimg.com/originals/1b/7c/9f/1b7c9f891c25276e49be05883efab3d1.gif"
    var knucklesconv = document.getElementById("knucklesconv")
    
    //room backgrounds
    var background1 = new Image();
    background1.src = "https://previews.123rf.com/images/albund/albund1909/albund190900123/130519012-a-direct-top-view-down-a-well-lit-clean-schools-hallway-of-bright-pink-lockers-3d-render.jpg";
    var background2 = new Image();
    background2.src = "https://pbs.twimg.com/media/EDlhKLUXsAUX9h1.png"
    var background3 = new Image();
    background3.src = "https://opengameart.org/sites/default/files/map_2.png"
    
    //images
    var doors = new Image();
    doors.src = "http://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/d727748855c8bf9.png"
    
    //integer-boolean legibility or some shit for interaction
    var talk = 0 
    var leave = 0 //suck my dick, RPG Maker
    
    //integer-boolean states
    var talking = 0 //pure booleans are for dickheads
    var convo = 0 
    
    //story checkpoints
    var checkpoint = 0 
    
    //storyline
    var story = 0
    
    //display start screen
    window.onload = function()
    {
        window.speechSynthesis.cancel()
        document.body.appendChild(startscreen)
        document.body.appendChild(startbtn)
        cstart.fillStyle = "black"
        cstart.globalAlpha = 0.4
        cstart.fillRect(0,0,startscreen.width,startscreen.height)
        cstart.globalAlpha = 1
        cstart.font = "bolder 50px Consolas"
        cstart.fillStyle = "yellow"
        cstart.fillText("CANT'T GET OGRE YOU",250,230)
    }
    startbtn.onclick = function()
    {
        if (clickcount==0)
        {
            clickcount++
            speech.text = "僕 の チン チン 和 小さい"
            window.speechSynthesis.speak(speech)
            setTimeout(gamestart,2500)
        }
    }
    
    function gamestart()
    {
        window.speechSynthesis.cancel()
        document.body.removeChild(startscreen)
        document.addEventListener("keydown",keyPush)
        document.addEventListener("keyup",keyPress)
        document.body.removeChild(startbtn)
        px = 300
        py = 520
        stage1()
    }
    
    //Hallway - Start area
    
    var npc = new Image();
    npc.src = "http://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/36dddc04644400e.png"
    var nd = 80
    var nl = [100,200,
              420,470,
              250,400,
              50,500,
              430,150] //arrays, holy fuckkkkkkkkkkkkkkkk
    
    //spawn students
    function spawn()
    {
        for (var i=0;i<10;i+=2)
        {
            nl.push({
                x: nl[i],
                y: nl[i+1]
            })
        }
        //el.push({}) deez nuts into your mouth
    }
    
    function stage1()
    {
        room = 1
        room1.width = room1.height = 600
        room1.style = "position: absolute; top:0; left:0;right:0; bottom:0; margin:auto;"
        document.body.appendChild(room1)
        spawn()
        setInterval(update1,0)
        if (story==0)
        {
            conversation()
        }
    }
    function update1()
    {
        if (room==1)
        {
            //shrek-player distance
            if (px>200 && px<360 && py>160 && py<320)
            {
                if (checkpoint==0)
                {
                    interact.innerHTML = "Press E to talk"
                    talk = 1
                }
            }
            
            //student-player distances
            else if (px>nl[0]-80 &&  px<nl[0]+80 && py>nl[1]-80 && py<nl[1]+80)
            {
                interact.innerHTML = "Press E to talk"
                talk = 1
            }
            else if (px>nl[2]-80 &&  px<nl[2]+80 && py>nl[3]-80 && py<nl[3]+80)
            {
                interact.innerHTML = "Press E to talk"
                talk = 1
            }
            else if (px>nl[4]-80 &&  px<nl[4]+80 && py>nl[5]-80 && py<nl[5]+80)
            {
                interact.innerHTML = "Press E to talk"
                talk = 1
            }
            else if (px>nl[6]-80 &&  px<nl[6]+80 && py>nl[7]-80 && py<nl[7]+80)
            {
                interact.innerHTML = "Press E to talk"
                talk = 1
            }
            else if (px>nl[8]-80 &&  px<nl[8]+80 && py>nl[9]-80 && py<nl[9]+80)
            {
                interact.innerHTML = "Press E to talk"
                talk = 1
            }
            
            //move to stage2()
            else if (px>120 && px<400 && py<95)
            {
                interact.innerHTML = "Press Q to leave"
                leave = 1
            }
            
            else
            {
                interact.innerHTML = ""
                talk = 0
                leave = 0
            }
        }
        context1.drawImage(background1,0,0,room1.width,room1.height)
        if (talking==1)
        {
            interact.innerHTML = "Press S to continue"
        }
        for (var n=0;n<nl.length;n++)
        {
            context1.drawImage(npc,nl[n].x,nl[n].y,nd,nd)
        }
        if (checkpoint==0)
        {
            context1.drawImage(shrek,280,240,80,80)
        }
        context1.globalAlpha = 0.5
        if (talking==1)
        {
             if (open==1)
            {
                interact.innerHTML = "Press W to close"
            }
            else
            {
                interact.innerHTML = "Press S to continue"
            }
        }
        context1.fillStyle = "black"
        //context1.fillRect(200,35,200,60)
        context1.globalAlpha = 1
        if (right==1)
        {
            context1.drawImage(player,px,py,pd,pd)
        }
        else if (right==0)
        {
            context1.save()
            context1.scale(-1,1)
            context1.drawImage(player,px*-1,py,pd*-1,pd)
            context1.restore()
        }
    }
    
    
    
    //School yard - Confession area
    
    function stage2()
    {
        room = 2
        room2.width = room2.height = 600
        room2.style = "position: absolute; top:0; left:0;right:0; bottom:0; margin:auto;"
        document.body.appendChild(room2)
        setInterval(update2)
    }
    
    function update2()
    {
        if (room==2)
        {
            if (px>350 && px<530 && py>440 && py<600)
            {
                interact.innerHTML = "Press Q to leave"
                leave = 1
            }
            else if (px>20 && px<180 && py>20 && py<180)
            {
                if (checkpoint!=0 && checkpoint!=2)
                {
                    interact.innerHTML = "Press E to talk"
                    talk = 1
                }
            }
            else if (px>100 && px<240 && py>40 && py<180)
            {
                if (checkpoint>=9)
                {
                    leave = 1
                    interact.innerHTML = "Press Q to leave"
                }
                else
                {
                    interact.innerHTML = ""
                }
            }
            else if (px>300 || py>250)
            {
                interact.innerHTML = ""
                if (checkpoint==7)
                {
                    checkpoint = 8
                    story = 48
                    right = 0
                    conversation()
                }
            }
            else
            {
                interact.innerHTML = ""
                talk = 0
                leave = 0
            }
        }
        context2.drawImage(background2,0,0,room2.width,room2.height)
        context2.fillStyle = "white"
        context2.globalAlpha = 0.1
        context2.fillRect(0,0,room2.width,room2.height)
        if (talking==1)
        {
            if (open==1)
            {
                interact.innerHTML = "Press W to close"
            }
            else
            {
                interact.innerHTML = "Press S to continue"
            }
        }
        context2.globalAlpha = 1
        if (checkpoint!=0 && checkpoint!=2)
        {
            if (checkpoint>=13)
            {
                context2.save()
                context2.scale(-1,1)
                context2.drawImage(trueshrek,-100,100,-80,80)
                context2.restore()
            }
            else
            {
                context2.drawImage(shrek,100,100,80,80)
            }
        }
        if (checkpoint==12 || checkpoint==13)
        {
            if (checkpoint==13)
            {
                context2.globalAlpha = 0.6
            }
            context2.drawImage(explode,100,100,80,80)
            if (checkpoint==13)
            {
                context2.globalAlpha = 1
            }
        }
        if (checkpoint>=8)
        {
            context2.drawImage(pentagram,180,120,60,60)
        }
        context2.drawImage(doors,430,520,100,80)
        if (right==1)
        {
            context2.drawImage(player,px,py,pd,pd)
        }
        else if (right==0)
        {
            context2.save()
            context2.scale(-1,1)
            context2.drawImage(player,px*-1,py,pd*-1,pd)
            context2.restore()
        }
    }
    
    var explode = new Image();
    explode.src = "https://www.seekpng.com/png/full/96-964020_pixel-explosion-png-pixel-art-explosion-png.png"
    
    
    //Cave - Ligma Fruit Area
    
    function stage3()
    {
        room = 3
        room3.width = room3.height = 600
        room3.style = "position: absolute; top:0; right:0; left:0; bottom:0; margin: auto"
        document.body.appendChild(room3)
        setInterval(update3,0)
    }
    
    function update3()
    {
        if (room==3)
        {
            if (px>320 && px<480 && py>220 && py<380)
            {
                interact.innerHTML = "Press E to talk"
                talk = 1
            }
            else if (px>220 && px<360 && py>20 && py<160)
            {
                interact.innerHTML = "Press Q to leave"
                leave = 1
            }
            else
            {
                interact.innerHTML = ""
                talk = 0
                leave = 0
            }
        }
        context3.drawImage(background3,-360,-120,room3.width+1020,room3.height+440)
        if (talking==1)
        {
            if (open==1)
            {
                interact.innerHTML = "Press W to close"
            }
            else
            {
                interact.innerHTML = "Press S to continue"
            }
        }
        context3.drawImage(pentagram,300,100,60,60)
        context3.drawImage(knuckles,400,300,80,80)
        if (checkpoint==10)
        {
            deadplayer = new Image();
            deadplayer.src = "https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/5c166dfe-c9a3-4160-8f64-d17e22f1ea6b/d4qharr-eded0a7e-6cd1-484d-977c-22fc8c7bcbf1.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzVjMTY2ZGZlLWM5YTMtNDE2MC04ZjY0LWQxN2UyMmYxZWE2YlwvZDRxaGFyci1lZGVkMGE3ZS02Y2QxLTQ4NGQtOTc3Yy0yMmZjOGM3YmNiZjEucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.Q_ePxxOcYhFD9PPv2xII-MpgTQ7ImbllQJBn87IwPWc"
            context3.drawImage(deadplayer,px,py,pd,pd)
            //shut up, I know this is a pussy solution
            //context.rotate() was being a bitch, okay? 
        }
        else
        {
            if (right==1)
            {
                context3.drawImage(player,px,py,pd,pd)
            }
            else if (right==0)
            {
                context3.save()
                context3.scale(-1,1)
                context3.drawImage(player,px*-1,py,pd*-1,pd)
                context3.restore()
            }
        }
    }
    
    
    //dialogue box and context
    var speechbox = document.createElement("canvas")
    var text = speechbox.getContext('2d')
    speechbox.width = 500
    speechbox.height = 200
    speechbox.style = "position: absolute; right:0; left:0; margin: auto"
    speechbox.style.top = window.innerHeight*2/3
    text.font = "20px Consolas"
    var studentdiag = ""
    
    //choice box
    var choicebox = document.createElement("canvas")
    choicebox.width = choicebox.height = 600
    choicebox.style = "position: absolute;top:0; right:0; left:0; bottom:0; margin: auto"
    var c = choicebox.getContext('2d')
    
    //choice buttons
    var yesbox = document.createElement("button")
    var nobox = document.createElement("button")
    yesbox.style = "width: 500; height: 50;font-size: 25;text-align: center; position: absolute; left:0; right:0; margin: auto";
    nobox.style = "width: 500; height: 50; font-size: 25; text-align: center; position: absolute; left:0; right:0; margin: auto";
    yesbox.style.top = window.innerHeight*2/5
    nobox.style.top = window.innerHeight*2.5/5
    
    //game story
    
    function conversation()
    {
        talking = 1
        convo = 1
        if (talking==1)
        {
            window.speechSynthesis.cancel()
            if (story==0)
            {
                document.body.appendChild(speechbox)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("(I can't hold it in anymore. I must confess",10,80)
                text.fillText("to senpai!)",10,110)
                story = 1
            }
            else if (story==1)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==2)
            {
                document.body.appendChild(speechbox)
                student.style.display = "block"
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                var num = Math.floor((Math.random()*5)+1)
                switch (num)
                {
                    case 1:
                        studentdiag = "Drill my ass, Shrek-sama"
                        speech.text = "私のお尻をドリル、シュレック様"
                    break;
                    case 2:
                        studentdiag = "Shrek senpai is so hot, isn't she?"
                        speech.text = "シュレック先輩はとても暑いですよね？"
                    break;
                    case 3:
                        studentdiag = "Gimme that ogre pussy"
                        speech.text = "あの鬼マンコをちょうだい"
                    break;
                    case 4:
                        studentdiag = "Shrek-sama makes me hard"
                        speech.text = "シュレックは私を勃起させます"
                    break;
                    case 5:
                        studentdiag = "Shrek-sama is so talented, pretty and smart!"
                        speech.text = "シュレック様はとても才能があり、かわいくて賢いです"
                    break;
                }
                speech.pitch = 0.9
                window.speechSynthesis.speak(speech)
                text.fillStyle = "white"
                text.fillText("Student: ", 10,50)
                text.fillText(studentdiag, 10,80)
                story = 3
            }
            else if (story==3)
            {
                student.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==4)
            {
                document.body.appendChild(speechbox)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Should I confess to Senpai in front of",10,80)
                text.fillText("everyone?",10,110)
                story = 5
            }
            else if (story==5)
            {
                document.body.removeChild(speechbox)
                interact.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.appendChild(choicebox)
                c.globalAlpha = 0.7
                c.fillStyle = "black"
                c.fillRect(0,0,choicebox.width,choicebox.height)
                c.globalAlpha = 1
                document.body.appendChild(yesbox)
                document.body.appendChild(nobox)
                yesbox.innerHTML = "Yes"
                nobox.innerHTML = "No"
            }
            else if (story==6)
            {
                interact.style.display = "block"
                document.body.appendChild(speechbox)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Senpai!! I like you!!",10,80)
                story = 7
            }
            else if (story==7)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Everyone starts to point and stare at",10,50)
                text.fillText("you, murmuring to each other.",10,80)
                story = 8
            }
            else if (story==8)
            {
                speech.pitch = 1.2
                shrekconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Get... get...",10,80)
                speech.text = "取得...取得..."
                window.speechSynthesis.speak(speech)
                story = 9
            }
            else if (story==9)
            {
                shrekconv.style.display = "none"
                angryshrek.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("GET AWAY FROM ME BAKA!!!!",10,80)
                speech.text = "私から離れてバカ"
                window.speechSynthesis.speak(speech)
                story = 10
            }
            else if (story==10)
            {
                document.body.removeChild(speechbox)
                document.body.removeChild(room1)
                angryshrek.style.display = "none"
                gameover()
            }
            else if (story==11)
            {
                interact.style.display = "block"
                document.body.appendChild(speechbox)
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Senpai, can we talk in private somewhere",10,80)
                text.fillText("else?",10,110)
                story = 12
            }
            else if (story==12)
            {
                speech.pitch = 1.2
                shrekconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Sure! Let's go talk at the school",10,80)
                text.fillText("playground!",10,110)
                speech.text = "確かに、学校の遊び場で話をしましょう"
                window.speechSynthesis.speak(speech)
                story = 13
            }
            else if (story==13)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("I'll race you there!",10,80)
                speech.text = "私はそこであなたと競争します"
                window.speechSynthesis.speak(speech)
                story = 14
            }
            else if (story==14)
            {
                checkpoint = 1
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
                talk = 0
                interact.innerHTML = ""
            }
            else if (story==15)
            {
                speech.pitch = 1.2
                shrekconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("So, what was it you wanted to talk about?",10,80)
                speech.text = "それで、あなたは何について話したかったのですか"
                window.speechSynthesis.speak(speech)
                story = 16
            }
            else if (story==16)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You: ",10,50)
                text.fillText("Sen...senpai...",10,80)
                story = 17
            }
            else if (story==17)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You: ",10,50)
                text.fillText("I like you!",10,80)
                story = 18
            }
            else if (story==18)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek: ",10,50)
                text.fillText("I...",10,80)
                speech.text = "私..."
                window.speechSynthesis.speak(speech)
                story = 19
            }
            else if (story==19)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek: ",10,50)
                text.fillText("I like you too!!",10,80)
                speech.text = "私もあなたが好き"
                window.speechSynthesis.speak(speech)
                story = 20
            }
            else if (story==20)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek: ",10,50)
                text.fillText("But, I'm too ugly for you...",10,80)
                speech.text = "しかし、私はあなたにはあまりにも醜いです..."
                window.speechSynthesis.speak(speech)
                story = 21
            }
            else if (story==21)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("That's not true! You're really pretty!",10,80)
                story = 22
            }
            else if (story==22)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("I'm so happy...",10,80)
                speech.text = "私はとても幸せだ"
                window.speechSynthesis.speak(speech)
                story = 23
            }
            else if (story==23)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("But I just wish I could be human again.",10,80)
                speech.text = "しかし、私は私が再び人間になれたらいいのにと思います"
                window.speechSynthesis.speak(speech)
                story = 24
            }
            else if (story==24)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("You see, I was turned into an ogre by a",10,80)
                text.fillText("wizard, Joe M Ligma.",10,110)
                speech.text = "ほら、私は魔法使いのジョー・M・リグマによって鬼に変えられました"
                window.speechSynthesis.speak(speech)
                story = 25
            }
            else if (story==25)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("And the only way to reverse the curse is",10,80)
                text.fillText("by eating the Ligma fruit.",10,110)
                speech.text = "そして、呪いを逆転させる唯一の方法は、リグマフルーツを食べることです"
                window.speechSynthesis.speak(speech)
                story = 26
            }
            else if (story==26)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Will you help me get the Ligma fruit?",10,80)
                speech.text = "リグマの実を手に入れるのを手伝ってくれませんか"
                window.speechSynthesis.speak(speech)
                story = 27
            }
            else if (story==27)
            {
                document.body.removeChild(speechbox)
                shrekconv.style.display = "none"
                interact.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.appendChild(choicebox)
                c.globalAlpha = 0.7
                c.fillStyle = "black"
                c.fillRect(0,0,choicebox.width,choicebox.height)
                c.globalAlpha = 1
                document.body.appendChild(yesbox)
                document.body.appendChild(nobox)
                yesbox.innerHTML = "Yes"
                nobox.innerHTML = "No"
            }
            else if (story==28)
            {
                interact.style.display = "block"
                shrekconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Nah, I'll pass.",10,80)
                story = 29
            }
            else if (story==29)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Oh. Okay then.",10,80)
                speech.text = "おー。じゃあオーケー"
                window.speechSynthesis.speak(speech)
                story = 30
            }
            else if (story==30)
            {
                checkpoint = 2
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek ran off with tears in her eyes.",10,50)
                story = 31
            }
            else if (story==31)
            {
                document.body.removeChild(speechbox)
                document.body.removeChild(room2)
                angryshrek.style.display = "none"
                gameover()
            }
            else if (story==32)
            {
                document.body.appendChild(speechbox)
                shrekconv.style.display = "block"
                interact.style.display  ='block'
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Sure! I'll do it for senpai!",10,80)
                story = 33
            }
            else if (story==33)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Thank you so much! You can find the Ligma",10,80)
                text.fillText("fruit in the mines on Goteem Island.",10,110)
                speech.text = "どうもありがとう！リグマフルーツはゴティーム島の鉱山で見つけることができます"
                window.speechSynthesis.speak(speech);
                story = 34
            }
            else if (story == 34)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Wait, how do I get to this Ligma Island?",10,80)
                story = 35
            }
            else if (story==35)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("I'll help you create a portal to get there!",10,80)
                text.fillText("I just need a paintbrush...",10,110)
                speech.text = "そこにたどり着くためのポータルの作成をお手伝いします！クレヨンが必要です。"
                window.speechSynthesis.speak(speech);
                story = 36
            }
            else if (story==36)
            {
                checkpoint = 3
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==37)
            {
                document.body.appendChild(speechbox)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Got a paintbrush?",10,80)
                story = 38;
            }
            else if (story==38)
            {
                speech.pitch = 0.9
                student.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Student: ",10,50)
                text.fillText("Yeah, here!",10,80)
                speech.text = "ええ、ここに"
                window.speechSynthesis.speak(speech)
                pbcount = 1
                story = 39
            }
            else if (story==39)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("--Press W to view your items!--",10,50)
                story = 40
            }
            else if (story==40)
            {
                checkpoint = 4
                student.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==41)
            {
                speech.pitch = 1.2
                shrekconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Have you gotten the paintbrush yet?",10,80)
                speech.text = "絵筆はもう手に入れましたか？"
                window.speechSynthesis.speak(speech)
                story = 42
            }
            else if (story==42)
            {
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==43)
            {
                speech.pitch = 1.2
                document.body.appendChild(speechbox)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("I got the paintbrush!",10,80)
                story = 44
            }
            else if (story==44)
            {
                shrekconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Nice! Stand back now...",10,80)
                speech.text = "良い！今、立ち返ってください。"
                window.speechSynthesis.speak(speech)
                story = 45
                pbcount = 0
            }
            else if (story==45)
            {
                checkpoint = 7
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==46)
            {
                speech.pitch = 1.2
                document.body.appendChild(speechbox)
                shrekconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Step back now, I need to draw the pentagram.",10,80)
                speech.text = "今、戻って、五芒星を描く必要があります..."
                window.speechSynthesis.speak(speech)
                story = 47
            }
            else if (story==47)
            {
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==48)
            {
                checkpoint = 8
                document.body.appendChild(speechbox)
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("(Shrek-sama painted a pentagram...)",10,80)
                story = 49;
            }
            else if (story==49)
            {
                checkpoint = 9
                shrekconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Alright! The portal is done!",10,80)
                speech.text = "大丈夫！ポータルが完成しました！"
                window.speechSynthesis.speak(speech)
                story = 50;
            }
            else if (story==50)
            {
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
                interact.innerHTML = ""
            }
            else if (story==51)
            {
                speech.pitch = 1.2
                shrekconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Please come back safely!",10,80)
                speech.text = "無事に戻ってきてください！"
                window.speechSynthesis.speak(speech)
                story = 52;
            }
            else if (story==52)
            {
                shrekconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            //well, fuck 
            else if (story==53)
            {
                speech.pitch = 0.5
                knucklesconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("What brings you here, my child?",10,80)
                speech.text = "何があなたをここに連れてくるのか、私の子供"
                window.speechSynthesis.speak(speech) 
                story = 54
            }
            else if (story==54)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("I'm here to find the Ligma fruit. Who are",10,80)
                text.fillText("you?",10,110)
                story = 55
            }
            else if (story==55)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("I am the guardian of the Ligma fruit. I",10,80)
                text.fillText("only give the Ligma fruit to those I deem",10,110)
                text.fillText("worthy, to prevent it from falling into the",10,140)
                text.fillText("wrong hands.",10,170)
                speech.pitch = 0.5
                speech.text = "私のペニスは小さいです"
                window.speechSynthesis.speak(speech) 
                //suck on my coded voicelines, rpg maker cunts 
                story = 58
            }
            else if (story==56)
            {
                document.body.appendChild(speechbox)
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("(I can't leave yet! I still have to get the",10,80)
                text.fillText("Ligma fruit for Senpai!)",10,110)
                story = 57
            }
            else if (story==57)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==58)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("If you want the Ligma fruit, you must answer",10,80)
                text.fillText("a question.",10,110)
                speech.text = "リグマフルーツが必要な場合は、質問に答える必要があります"
                window.speechSynthesis.speak(speech)
                story = 59
            }
            else if (story==59)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Alright! Ask away!",10,80)
                story = 60
            }
            else if (story==60)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("Do you know Candice?",10,80)
                speech.text = "キャンディスを知っていますか？"
                window.speechSynthesis.speak(speech)
                story = 61
            }
            else if (story==61)
            {
                knucklesconv.style.display = "none"
                document.body.removeChild(speechbox)
                interact.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.appendChild(choicebox)
                c.globalAlpha = 0.7
                c.fillStyle = "black"
                c.fillRect(0,0,choicebox.width,choicebox.height)
                c.globalAlpha = 1
                document.body.appendChild(yesbox)
                document.body.appendChild(nobox)
                yesbox.innerHTML = "Yes"
                nobox.innerHTML = "No"
            }
            else if (story==62)
            {
                interact.style.display = "block"
                knucklesconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("No, who's Candice?",10,80)
                story = 63
            }
            else if (story==63)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("CANDEEZ NUTS FIT IN YO MOUTH",10,80)
                speech.text = "カンディーズナッツはヨーヨーの口に収まります"
                window.speechSynthesis.speak(speech)
                story = 64
            }
            else if (story==64)
            {
                checkpoint = 10
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("--You died from the cringe--",10,50)
                story = 65
            }
            else if (story==65)
            {
                document.body.removeChild(speechbox)
                document.body.removeChild(room3)
                knucklesconv.style.display = "none"
                gameover()
            }
            else if (story==66)
            {
                interact.style.display = "block"
                knucklesconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Yes...?",10,80)
                story = 67
            }
            else if (story==67)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("It seems, you ARE worthy.",10,80)
                speech.text = "あなたは価値があるようです"
                window.speechSynthesis.speak(speech)
                story = 68
            }
            else if (story==68)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("Well, as promised, here's a Ligma fruit.",10,80)
                speech.text = "さて、約束通り、ここにリグマフルーツがあります"
                window.speechSynthesis.speak(speech)
                story = 69 
                ncount = 1
            }
            else if (story==69)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("Also, good luck with that girl ;)",10,80)
                speech.text = "また、その女の子と頑張ってください"
                window.speechSynthesis.speak(speech)
                story = 70
            }
            else if (story==70)
            {
                checkpoint = 11
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.fillStyle = "black"
                text.globalAlpha = 0.7
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Wait how'd you-",10,80)
                story = 71
            }
            else if (story==71)
            {
                knucklesconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==72)
            {
                knucklesconv.style.display = "block"
                document.body.appendChild(speechbox)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Knuckles:",10,50)
                text.fillText("The girl is still waiting for you ;)",10,80)
                speech.text = "女の子はまだあなたを待っています"
                window.speechSynthesis.speak(speech)
                story = 73
            }
            else if (story==73)
            {
                knucklesconv.style.display = "none"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                document.body.removeChild(speechbox)
                convo = 0
                story = 2
                talking = 0
            }
            else if (story==74)
            {
                speech.pitch = 1.2
                document.body.appendChild(speechbox)
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("Senpai! I got the Ligma fruit!",10,80)
                story = 75
            }
            else if (story==75)
            {
                shrekconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("Thank you so much! I knew you could",10,80)
                text.fillText("do it!",10,110)
                speech.text = "どうもありがとう！私はあなたがそれをすることができることを知っていました！"
                window.speechSynthesis.speak(speech)
                story = 76
            }
            else if (story==76)
            {
                ncount = 0
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("--Shrek eats the Ligma fruit--",10,50)
                story = 77
                //WE'RE REACHING THE END OF THIS SHITTY GAME, ASSHOLES!!! 
            }
            else if (story==77)
            {
                shrekconv.style.display = "none"
                checkpoint = 12
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("SENPAI!!!",10,80)
                story = 78
            }
            else if (story==78)
            {
                shrekconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("Shrek:",10,50)
                text.fillText("It's alright, I'm fine!",10,80)
                speech.text = "大丈夫です！私は元気！"
                window.speechSynthesis.speak(speech)
                story = 79
            }
            else if (story==79)
            {
                shrekconv.style.display = "none"
                checkpoint = 13
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("--The smoke begins to clear--",10,50)
                story = 80
            }
            else if (story==80)
            {
                checkpoint = 14
                oldconv.style.display = "block"
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("'Shrek':",10,50)
                text.fillText("This is my human form!",10,80)
                speech.text = "これが私の人間の姿です！"
                window.speechSynthesis.speak(speech)
                document.body.style.background = "black"
                interact.style.color = "white"
                story = 81
            }
            else if (story==81)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("'Shrek':",10,50)
                text.fillText("Shall we go on a date now?",10,80)
                speech.text = "今デートしませんか？"
                window.speechSynthesis.speak(speech)
                story = 82
            }
            else if (story==82)
            {
                text.clearRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 0.7
                text.fillStyle = "black"
                text.fillRect(0,0,speechbox.width,speechbox.height)
                text.globalAlpha = 1
                text.fillStyle = "white"
                text.fillText("You:",10,50)
                text.fillText("what the fuck",10,80)
                story = 83;
            }
            else if (story==83)
            {
                document.body.removeChild(speechbox)
                oldconv.style.display = "none"
                interact.style.display = "none"
                document.body.removeChild(room2)
                ending()
            }
        }
    }
    
    function ending()
    {
        document.removeEventListener("keydown",keyPush)
        document.body.appendChild(endscreen)
        e.fillStyle = "white"
        e.fillText("Game end!",170,300)
    }
    
    //ending screen
    var endscreen = document.createElement("canvas")
    endscreen.width = endscreen.height = 600
    endscreen.style = "position: absolute; top:0; right:0; left:0; bottom:0; margin: auto;background: black"
    var e = endscreen.getContext('2d')
    e.font = "bold 50px Courier New"
    
    //gameover screen
    var failscreen = document.createElement("canvas")
    failscreen.width = failscreen.height = 600
    failscreen.style = "position: absolute; top:0; right:0; left:0; bottom:0; margin: auto; background: black"
    var f = failscreen.getContext('2d')
    f.font = "bold 50px Courier New"
    
    function gameover()
    {
        document.removeEventListener("keydown",keyPush)
        document.body.appendChild(failscreen)
        document.body.style.background = "black"
        f.fillStyle = "red"
        f.fillText("~~Game Over~~",110,300)
    }
    
    //choices onclick events or some fucking dumbasss shit
    yesbox.onclick = function()
    {
        switch (story)
        {
            case 5:
                story = 6
            break;
            case 27:
                story = 32
            break;
            case 61:
                story = 66
            break;
        }
        document.body.removeChild(choicebox)
        document.body.removeChild(yesbox)
        document.body.removeChild(nobox)
        c.clearRect(0,0,choicebox.width,choicebox.height)
        conversation()
    }
    
    nobox.onclick = function()
    {
        switch (story)
        {
            case 5:
                story = 11
            break;    
            case 27:
                story = 28
            break;
            case 61:
                story = 62
            break;
        }
        document.body.removeChild(choicebox)
        document.body.removeChild(yesbox)
        document.body.removeChild(nobox)
        c.clearRect(0,0,choicebox.width,choicebox.height)
        conversation()
    }
    
    function inventory()
    {
        document.body.appendChild(inv)
        i.globalAlpha = 0.5
        i.fillStyle = "black"
        i.fillRect(0,0,inv.width,inv.height)
        i.globalAlpha = 1
        i.fillStyle = "white"
        i.fillText("YOUR INVENTORY",10,50)
        if (pbcount == 1)
        {
            i.drawImage(paintbrush,10,80,100,100)
            i.font = "25px Consolas"
            i.fillText("Paintbrush",150,110)
        }
        if (ncount==1)
        {
            i.drawImage(nut,10,80,100,100)
            i.font = "25px Consolas"
            i.fillText("Ligma Fruit",150,110)
        }
    }
    
    //pentagram
    var pentagram = new Image();
    pentagram.src = "http://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/3e5108545f210cb.png"
    
    //inventory
    var inv = document.createElement("canvas")
    var i = inv.getContext('2d')
    inv.width = inv.height = 600
    inv.style = "position: absolute; top:0; right:0; left:0; bottom:0; margin: auto"
    i.fillStyle = "white"
    i.font = "bold 30px Consolas"
    
    //inventory open identifier
    var open = 0
    
    //items
    
    //brush
    var paintbrush = new Image(); //for drawing pentagram
    paintbrush.src = "http://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/adba1fe29063e8b.png"
    var pbcount = 0
    
    //deez nuts
    var nut = new Image();
    nut.src = "http://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/5d8d4eb3e57f6bc.png"
    var ncount = 0
    
    //Key inputs
    function keyPush(evt)
    {
        switch(evt.keyCode)
        {
            //moving between rooms
            case 81:
                if (leave==1 && open==0 && talking==0)
                {
                    leave = 0
                    if (room==1)
                    {
                        document.body.removeChild(room1)
                        px = 420
                        py = 520
                        stage2()
                    }
                    else if (room==2)
                    {
                        if (px>100 && px<240 && py>40 && py<180)
                        {
                            if (checkpoint>=9)
                            {
                                document.body.removeChild(room2)
                                px = 300
                                py = 70
                                stage3()
                            }
                        }
                        else if (px>350 && px<530 && py>440 && py<600)
                        {
                            document.body.removeChild(room2)
                            px = 300
                            py = 30
                            stage1()
                        }
                    }
                    else if (room==3)
                    {
                        if (px>220 && px<360 && py>20 && py<160)
                        {
                            if (checkpoint>=11)
                            {
                                document.body.removeChild(room3)
                                px = 180
                                py = 90
                                stage2()
                            }
                            else
                            {
                                story = 56;
                                conversation()
                            }
                        }
                    }
                }
            break;
            
            
            //talking
            case 69:
                if (talk==1 && talking==0)
                {
                    if (room==1)
                    {
                        talking = 1
                        if (px>200 && px<360 && py>160 && py<320)
                        {
                            if (checkpoint==0)
                            {
                                story = 4
                                conversation()
                            }
                        }
                        else
                        {
                            if (checkpoint==3)
                            {
                                story = 37
                                conversation()
                            }
                            else
                            {
                                story = 2
                                conversation();
                            }
                        }
                    }
                    else if (room==2)
                    {
                        talking = 1
                        if (px>20 && px<180 && py>20 && py<180)
                        {
                            if (checkpoint==1)
                            {
                                story = 15
                                conversation()
                            }
                            else if (checkpoint==4)
                            {
                                story = 43
                                conversation()
                            }
                            else if (checkpoint==7)
                            {
                                story = 46
                                conversation()
                            }
                            else if (checkpoint==9)
                            {
                                story = 51
                                conversation()
                            }
                            else if (checkpoint==11)
                            {
                                story = 74
                                conversation()
                            }
                            else
                            {
                                story = 41;
                                conversation()
                            }
                        }
                    }
                    else if (room==3)
                    {
                        if (px>320 && px<480 && py>220 && py<380)
                        {
                            if (checkpoint>=11)
                            {
                                story = 72
                                conversation()
                            }
                            else
                            {
                                story = 53
                                conversation()
                            }
                        }
                    }
                }
            break;
            
            //inventory
            case 87:
            if (open==0)
            {
                open = 1
                talking = 1
                inventory()
            }
            else if (open==1)
            {
                open = 0
                if (convo==0)
                {
                    talking = 0    
                }
                i.clearRect(0,0,inv.width,inv.height)
                document.body.removeChild(inv)
            }
            break;
                
            //movement
            case 37:
                if (talking==0)
                {
                    if (px!=0)
                    {
                        px-=ps
                        right = 0
                    }
                }
            break;
            case 38:
                if (talking==0)
                {
                    if (py!=0)
                    {
                        py-=ps
                    }
                }
            break;
            case 39:
                if (talking==0)
                {
                    if (px!=530)
                    {
                        px+=ps
                        right = 1
                    }
                }
            break;
            case 40:
                if (talking==0)
                {
                    if (py!=520)
                    {
                        py+=ps;
                    }
                }
            break;
        }
    }
    
    //Progressing conversations
    function keyPress(e)
    {
        if (e.keyCode==83)
        {
            if (talking==1 && open==0)
            {
                conversation()
            }
        }
    }
</script>
</html>